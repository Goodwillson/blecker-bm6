<!DOCTYPE HTML><html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
	<title>Blecker BM6 Administration</title>

</head>
<body>

	<div id="loadingStart">Loading...</div>
	
	<div id="main" style="display: none;">
		<div class="loading" id="loader" style="display: none;">
			<div style="margin-left: -25px">Loading...</div>
			<div>&#8230;</div>
		</div>
		<div class="logo">
			BLEcker BM6
		</div>
		<div id="header">
			<div class="row">
				<h5><strong>BLE + BM6 battery monitor</strong> <i>tracker</i></h5>
			</div>
		</div>
		<div id="sidebar">		
			<a class="button w100" href="/">home</a>
			<a class="button w100" href="/update">update</a>
			<!--<a class="button w100 button-danger" id="reset" href="#">reset</a>-->
			<div class="version" id="version">%VERSION%</div>
			<div class="version" id="chip"></div>
			
			<div id="footer">
				<div><a href="https://github.com/Goodwillson/blecker-bm6" target="_blank">Blecker BM6</a></div>
			</div>

		</div>
		<div id="content">
			<div class="contaier">

				<!-- The Modal -->
				<div id="myModal" class="modal" style="display: none;">

					<!-- Modal content -->
					<div class="modal-content">
					<span class="close">&times;</span>
					<p>Some text in the Modal..</p>
					</div>
				
				</div>

				<div class="row">
				<form id="dataform">
					<div class="row" style="position: relative">
						<h5 class="grey hrborder">Network settings</h5>
						<div class="extrafunc pull-right text-warning hand" id="advancednet" onclick="advanced()">advanced +</div>
						<div class="extrafunc pull-right text-warning hand" id="basicnet" style="display: none" onclick="advanced()">basic -</div>
					</div>
					<div class="row">					
						<div class="six columns">
							<label for="ssid">WiFi name</label>
							<input type="text" class="u-full-width" name="ssid" id="ssid" placeholder="SSID">
						</div>
						<div class="six columns">
							<label for="pw">Password</label>
							<input type="password" class="u-full-width" name="pw" id="pw" placeholder="Password">
						</div>
					</div>

					<hr />
										
					<div class="row">					
						<div class="six columns">
							<label for="mqttserver">MQTT server</label>
							<input type="text" class="u-full-width" name="mqttserver" id="mqttserver" placeholder="MQTT server address">
						</div>
						<div class="three columns">
							<label for="mqttport">MQTT port</label>
							<input type="text" class="u-full-width" value="1883" name="mqttport" id="mqttport" placeholder="MQTT server mqttport">
						</div>
						
						<div class="three columns">
							<label for="mqttprefix">Base topic</label>
							<input type="text" class="u-full-width" name="mqttprefix" id="mqttprefix" placeholder="MQTT topic prefix">
						</div>
					</div>

					<div class="row">					
						<div class="six columns">
							<label for="mqttuser">Username</label>
							<input type="text" class="u-full-width" name="mqttuser" id="mqttuser" placeholder="Username">
						</div>
						<div class="six columns">
							<label for="mqttpw">Password</label>
							<input type="password" class="u-full-width" name="mqttpw" id="mqttpw" placeholder="Password">
						</div>
					</div>

					<div style="display: none" id="networkmore_presence">
						<div class="row">					
							<div class="six columns">
								<label for="present">Presence string (available)</label>
								<input type="text" class="u-full-width" name="present" id="present" placeholder="present">
							</div>
							<div class="six columns">
								<label for="notpresent">Presence string (not available)</label>
								<input type="text" class="u-full-width" name="notpresent" id="notpresent" placeholder="not present">
							</div>
						</div>
					</div>

					<div style="display: none" id="networkmore_presence_retain">
						<div class="row">					
							<div class="six columns">
								<label for="status_on">Presence status retain</label>								
								<select class="u-full-width" name="presence_retain" id="presence_retain">
									<option value="0">no</option>
									<option value="1">yes</option>							
								</select>
								<div class="inputcomment">Beacon presence status report and detailed report message retain flag </div>
							</div>							
						</div>
					</div>

					<div style="display: none" id="networkmore_status">
						<div class="row">					
							<div class="six columns">
								<label for="status_on">Device status string (on)</label>
								<input type="text" class="u-full-width" name="status_on" id="status_on" placeholder="on">
							</div>
							<div class="six columns">
								<label for="status_off">Device status string (off)</label>
								<input type="text" class="u-full-width" name="status_off" id="status_off" placeholder="off">
							</div>
						</div>
					</div>

					<div style="display: none" id="networkmore_retain">
						<div class="row">					
							<div class="six columns">
								<label for="status_on">Device status retain</label>								
								<select class="u-full-width" name="status_retain" id="status_retain">
									<option value="0">no</option>
									<option value="1">yes</option>							
								</select>
								<div class="inputcomment">BLEcker device status report and last will message retain flag </div>
							</div>							
						</div>
					</div>

					<div style="display: none" id="networkmore_deviceid">
						<div class="row">					
							<div class="six columns">
								<label for="deviceid">Device ID</label>
								<input type="text" class="u-full-width" name="deviceid" id="deviceid" placeholder="random">
							</div>							
						</div>
					</div>

					<hr />
					
					<div class="row">
						<label for="devices">Observed devices</label>
						<input type="text" class="u-full-width" name="devices" id="devices" placeholder="ex.: 317234b9d2d0;15172f81accc;d0e003795c50">
						<div class="inputcomment">Mac of the BLE devices.</div>
					</div>

					<hr />

					<div class="row">
						<label for="hadisc">Home Assistant Autodiscovery</label>
						<select class="u-full-width" name="hadisc" id="hadisc">
							<option value="0">Do not send</option>
							<option value="1">Send</option>							
						</select>
						<div class="inputcomment">Send autodiscovery message for Home Assistant (<a href="https://www.home-assistant.io/docs/mqtt/discovery/" target="_blank">details</a>)</div>
					</div>

					<div class="row">
						<label for="hadiscpref">Autodiscovery prefix</label>
						<input type="text" class="u-full-width" name="hadiscpref" id="hadiscpref" placeholder="homeassistant">
						<div class="inputcomment">Default for HA is homeassistant</div>
					</div>

					<hr />

					<div class="row">
						<label for="whp">Webhook</label>
						<input type="text" class="u-full-width" name="webhook" id="webhook" placeholder="http://example.com/{device}/{presence}">
						<div class="inputcomment">{device} and {presence} will be replaced with the actual device name and state</div>
					</div>

					<hr />

					<div class="row">
						<label for="reboot">Reboot after (hours)</label>
						<input type="text" class="u-full-width" name="reboot" id="reboot" onkeyup="validateInteger(this)" placeholder="">
						<div class="inputcomment"></div>
					</div>

					<div class="row">
						<label for="detailed">Detailed report</label>
						<select class="u-full-width" name="detailed" id="detailed">
							<option value="0">Do not send</option>
							<option value="1">Send</option>							
						</select>
						<div class="inputcomment">Send detailed MQTT report about the devices.</div>
					</div>
					
					<div class="row" style="height: 30px;"></div>					
					
					<input class="button-primary" type="button" value="Submit" id="savebutton" onclick="save()">
				</form>
				</div>
			</div>		
		</div>
		<script type="text/javascript" src="/functions.js"></script>
	</div>
	
</body>
</html>
